(this.webpackJsonpspinesweeper=this.webpackJsonpspinesweeper||[]).push([[0],[,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},,,,function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n,l=i(1),s=i.n(l),o=i(7),c=i.n(o),r=(i(12),i(4)),a=(i(13),i(14),i(15),i(2)),u=i(3);!function(e){e[e.Unclicked=0]="Unclicked",e[e.Clicked=1]="Clicked",e[e.Flagged=2]="Flagged",e[e.Questioned=3]="Questioned",e[e.UnclickedMine=4]="UnclickedMine",e[e.ClickedMine=5]="ClickedMine",e[e.FlaggedMine=6]="FlaggedMine",e[e.QuestionedMine=7]="QuestionedMine",e[e.Invalid=8]="Invalid"}(n||(n={}));n.Unclicked,n.Clicked,n.Flagged,n.Questioned;var d=[n.UnclickedMine,n.ClickedMine,n.FlaggedMine,n.QuestionedMine],h=[n.Unclicked,n.UnclickedMine,n.Flagged,n.FlaggedMine,n.Questioned,n.QuestionedMine],g=[n.Flagged,n.FlaggedMine],f=[n.Unclicked,n.Flagged,n.Questioned],m=(n.Clicked,n.ClickedMine,function(){function e(){Object(a.a)(this,e),this._isClicked=!1,this._isMine=!1,this._isFlagged=!1,this._isQuestioned=!1}return Object(u.a)(e,[{key:"cellState",get:function(){return this._isClicked?this._isMine?n.ClickedMine:n.Clicked:this._isMine?this._isFlagged?n.FlaggedMine:this._isQuestioned?n.QuestionedMine:n.UnclickedMine:this._isFlagged?n.Flagged:this._isQuestioned?n.Questioned:n.Unclicked}},{key:"click",value:function(){this._isFlagged||this._isQuestioned||(this._isClicked=!0)}},{key:"rightClick",value:function(){this._isClicked||(this._isFlagged?(this._isFlagged=!1,this._isQuestioned=!0):this._isQuestioned?this._isQuestioned=!1:this._isFlagged=!0)}},{key:"isMine",set:function(e){this._isMine=e}}]),e}()),k=i(0);var v=function(e){var t=e.cellState,i=e.numNeighborMines;return Object(k.jsx)("div",{className:"GameCell ".concat(h.includes(t)?"unclicked":t===n.Clicked?"clicked":t===n.ClickedMine?"clicked-mine":""),children:t===n.Clicked&&i>0?String(i):t===n.ClickedMine?"\ud83d\udca3":t===n.Flagged||t===n.FlaggedMine?"\ud83d\udea9":t===n.Questioned||t===n.QuestionedMine?"\u2753":""})};var C,b=function(e){var t=e.gameBoard,i=e.onCellClick;return Object(k.jsx)("div",{className:"GameBoard",id:"game-board","data-testid":"game-board",children:t.board.map((function(e,n){return Object(k.jsx)("div",{className:"Row",children:e.map((function(e,l){return Object(k.jsx)("div",{className:"Cell",onClick:function(e){return i(e,{row:n,column:l})},onContextMenu:function(e){return i(e,{row:n,column:l})},children:Object(k.jsx)(v,{cellState:t.getCellState({row:n,column:l}),numNeighborMines:t.getCellNumNeighborMines({row:n,column:l})})},l)}))},n)}))})},w=i(6),M=i.n(w);!function(e){e[e.Idle=0]="Idle",e[e.Active=1]="Active",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(C||(C={}));var j=[{row:0,column:1},{row:1,column:0},{row:0,column:-1},{row:-1,column:0},{row:1,column:1},{row:-1,column:-1},{row:1,column:-1},{row:-1,column:1}],y=function(){function e(t,i,n){Object(a.a)(this,e),this.rows=void 0,this.columns=void 0,this.mines=void 0,this.mineCount=void 0,this.board=void 0,this.validateInputs(t,i,n),this.rows=t,this.columns=i,this.mines=0,this.board=this.createInternalBoard(n),this.addMines(n),this.mineCount=this.mines}return Object(u.a)(e,[{key:"click",value:function(e){var t=this.getCellState(e);t===n.Unclicked?this.floodfill(e):t===n.UnclickedMine?this.explode():this.isFullyFlaggedCell(e)&&this.clickAllNeighbors(e),this.mineCount=this.calculateMineCount();var i=this.calculateGameState();return this.cleanUpGameIfNecessary(i),i}},{key:"rightClick",value:function(e){var t=this.getCell(e);h.includes(t.cellState)?t.rightClick():this.isFullyFlaggedCell(e)&&this.clickAllNeighbors(e),this.mineCount=this.calculateMineCount();var i=this.calculateGameState();return this.cleanUpGameIfNecessary(i),i}},{key:"calculateGameState",value:function(){var e=this.getStateCounts();return e[n.ClickedMine]?C.Lost:(e[n.Unclicked]||0)+(e[n.Flagged]||0)+(e[n.Questioned]||0)===0?C.Won:C.Active}},{key:"calculateMineCount",value:function(){for(var e=this.mines,t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)g.includes(this.getCellState({row:t,column:i}))&&(e-=1);return e}},{key:"getStateCounts",value:function(){for(var e={},t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++){var n=this.getCellState({row:t,column:i});e[n]=(e[n]||0)+1}return e}},{key:"clickAllNeighbors",value:function(e){var t=this;this.getInBoundNeighbors(e).forEach((function(e){t.getCellState(e)===n.UnclickedMine?t.explode():t.floodfill(e)}))}},{key:"getCellNumNeighborMines",value:function(e){var t=this;return this.isCellInBounds(e)?this.getInBoundNeighbors(e).map((function(e){return t.isMineCell(e)})).filter(Boolean).length:0}},{key:"getCellNumNeighborFlags",value:function(e){var t=this;return this.isCellInBounds(e)?this.getInBoundNeighbors(e).map((function(e){return t.isFlaggedCell(e)})).filter(Boolean).length:0}},{key:"getCell",value:function(e){if(!this.isCellInBounds(e))throw Error("Cell out of bounds");return this.board[e.row][e.column]}},{key:"getCellState",value:function(e){if(!this.isCellInBounds(e))throw Error("Cell out of bounds");return this.board[e.row][e.column].cellState}},{key:"floodfill",value:function(e){var t=this;this.getCellState(e)===n.Unclicked&&(this.getCell(e).click(),0===this.getCellNumNeighborMines(e)&&this.getInBoundNeighbors(e).forEach((function(e){t.floodfill(e)})))}},{key:"explode",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMineCell({row:e,column:t})&&this.board[e][t].click()}},{key:"getInBoundNeighbors",value:function(e){var t=this,i=[];return j.forEach((function(n){var l={row:e.row+n.row,column:e.column+n.column};t.isCellInBounds(l)&&i.push(l)})),i}},{key:"isCellInBounds",value:function(e){return!(e.row<0||e.row>=this.rows)&&!(e.column<0||e.column>=this.columns)}},{key:"createInternalBoard",value:function(e){for(var t=Array(this.rows),i=0;i<this.rows;i++){t[i]=Array(this.columns);for(var n=0;n<this.columns;n++)t[i][n]=new m}return t}},{key:"addMines",value:function(e){for(var t=this.rows*this.columns/2,i=0;i<e&&this.mines<t;){var n=this.getRandomInt(this.rows),l=this.getRandomInt(this.columns);this.isUnclickedNonMineCell({row:n,column:l})&&(this.board[n][l].isMine=!0,i++,this.mines++)}}},{key:"isMineCell",value:function(e){return d.includes(this.getCellState(e))}},{key:"isUnclickedNonMineCell",value:function(e){return f.includes(this.getCellState(e))}},{key:"isFlaggedCell",value:function(e){return g.includes(this.getCellState(e))}},{key:"isFullyFlaggedCell",value:function(e){return this.getCellState(e)===n.Clicked&&this.getCellNumNeighborFlags(e)===this.getCellNumNeighborMines(e)}},{key:"cleanUpGameIfNecessary",value:function(e){if(e===C.Won)for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.getCellState({row:t,column:i})===n.QuestionedMine&&this.rightClick({row:t,column:i}),this.getCellState({row:t,column:i})===n.UnclickedMine&&this.rightClick({row:t,column:i})}},{key:"validateInputs",value:function(e,t,i){var n=e*t/2;if(i<0||i>n)throw Error("Please provide a number of mines between 0 and ".concat(n));if(e<=0||e>100)throw Error("Please provide a number of rows between 1 and 100");if(t<=0||t>100)throw Error("Please provide a number of columns between 1 and 100")}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*(e-1))}},{key:"allCells",value:function(){for(var e=[],t=0;t<this.rows;t++)e=e.concat(this.board[t]);return e}}]),e}(),S=function(){function e(t,i,n){Object(a.a)(this,e),this.board=void 0,this._gameState=C.Idle,this.board=new y(t,i,n)}return Object(u.a)(e,[{key:"gameState",get:function(){return this._gameState}},{key:"click",value:function(e){return this._gameState===C.Won||this._gameState===C.Lost?this:(this._gameState=this.board.click(e),M.a.cloneDeep(this))}},{key:"rightClick",value:function(e){return this._gameState===C.Won||this._gameState===C.Lost?this:(this._gameState=this.board.rightClick(e),M.a.cloneDeep(this))}}]),e}();i(19);var F=function(e){var t=e.gameState,i=Object(l.useState)(0),n=Object(r.a)(i,2),s=n[0],o=n[1];return function(e,t,i){var n=Object(l.useRef)(),s=Object(l.useRef)(),o=Object(l.useRef)();function c(){n.current&&n.current()}Object(l.useEffect)((function(){n.current=e,s.current=t})),Object(l.useEffect)((function(){i===C.Active?o.current=setInterval(c,1e3):i!==C.Lost&&i!==C.Won&&i!==C.Idle||void 0===o.current||(clearInterval(o.current),i===C.Idle&&s.current&&s.current(0))}),[i])}((function(){return o(s+1)}),(function(){return o(0)}),t),Object(k.jsx)("div",{children:s})};document.addEventListener("contextmenu",(function(e){e.preventDefault()}));var p=function(){var e=Object(l.useState)(new S(20,20,50)),t=Object(r.a)(e,2),i=t[0],n=t[1];return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)("header",{className:"App-header",children:[Object(k.jsx)("button",{onClick:function(){n(new S(20,20,50))},children:"Reset"}),Object(k.jsxs)("div",{className:"header-numbers",children:[Object(k.jsx)(F,{gameState:i.gameState}),i.board.mineCount]}),Object(k.jsx)(b,{gameBoard:i.board,onCellClick:function(e,t){if("click"===e.type){var l=i.click(t);n(l)}else if("contextmenu"===e.type){var s=i.rightClick(t);n(s)}}})]})})},N=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,21)).then((function(t){var i=t.getCLS,n=t.getFID,l=t.getFCP,s=t.getLCP,o=t.getTTFB;i(e),n(e),l(e),s(e),o(e)}))};c.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(p,{})}),document.getElementById("root")),N()}],[[20,1,2]]]);
//# sourceMappingURL=main.264bf670.chunk.js.map