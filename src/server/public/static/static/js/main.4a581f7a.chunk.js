(this.webpackJsonpspinesweeper=this.webpackJsonpspinesweeper||[]).push([[0],{12:function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=t.clickedStates=t.unclickedNonMineStates=t.flaggedStates=t.unclickedStates=t.mineStates=t.nonMineStates=t.CellState=void 0,function(e){e[e.Unclicked=0]="Unclicked",e[e.Clicked=1]="Clicked",e[e.Flagged=2]="Flagged",e[e.Questioned=3]="Questioned",e[e.UnclickedMine=4]="UnclickedMine",e[e.ClickedMine=5]="ClickedMine",e[e.FlaggedMine=6]="FlaggedMine",e[e.QuestionedMine=7]="QuestionedMine",e[e.Invalid=8]="Invalid"}(i=t.CellState||(t.CellState={})),t.nonMineStates=[i.Unclicked,i.Clicked,i.Flagged,i.Questioned],t.mineStates=[i.UnclickedMine,i.ClickedMine,i.FlaggedMine,i.QuestionedMine],t.unclickedStates=[i.Unclicked,i.UnclickedMine,i.Flagged,i.FlaggedMine,i.Questioned,i.QuestionedMine],t.flaggedStates=[i.Flagged,i.FlaggedMine],t.unclickedNonMineStates=[i.Unclicked,i.Flagged,i.Questioned],t.clickedStates=[i.Clicked,i.ClickedMine];var o=function(){function e(){this._isClicked=!1,this._isMine=!1,this._isFlagged=!1,this._isQuestioned=!1}return Object.defineProperty(e.prototype,"cellState",{get:function(){return this._isClicked?this._isMine?i.ClickedMine:i.Clicked:this._isMine?this._isFlagged?i.FlaggedMine:this._isQuestioned?i.QuestionedMine:i.UnclickedMine:this._isFlagged?i.Flagged:this._isQuestioned?i.Questioned:i.Unclicked},enumerable:!1,configurable:!0}),e.prototype.click=function(){this._isFlagged||this._isQuestioned||(this._isClicked=!0)},e.prototype.rightClick=function(){this._isClicked||(this._isFlagged?(this._isFlagged=!1,this._isQuestioned=!0):this._isQuestioned?this._isQuestioned=!1:this._isFlagged=!0)},Object.defineProperty(e.prototype,"isMine",{set:function(e){this._isMine=e},enumerable:!1,configurable:!0}),e}();t.Cell=o},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameState=void 0,function(e){e[e.Idle=0]="Idle",e[e.Active=1]="Active",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(t.GameState||(t.GameState={}))},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeGame=t.Game=void 0;var i=n(40),o=n(42),l=n(12),r=n(18),c=function(){function e(e,t,n){this._gameState=r.GameState.Idle,this.board=new o.Board(e,t,n)}return Object.defineProperty(e.prototype,"gameState",{get:function(){return this._gameState},enumerable:!1,configurable:!0}),e.prototype.click=function(e){return this._gameState===r.GameState.Won||this._gameState===r.GameState.Lost?this:(this._gameState=this.board.click(e),i.cloneDeep(this))},e.prototype.rightClick=function(e){return this._gameState===r.GameState.Won||this._gameState===r.GameState.Lost?this:(this._gameState=this.board.rightClick(e),i.cloneDeep(this))},e}();t.Game=c,t.deserializeGame=function(e){var t=new c(10,10,10);Object.assign(t,e);for(var n=0;n<t.board.rows;n++)for(var i=0;i<t.board.columns;i++){var r=new l.Cell;Object.assign(r,e.board.board[n][i]),e.board.board[n][i]=r}return t.board=new o.Board(10,10,10),Object.assign(t.board,e.board),t}},38:function(e,t,n){},39:function(e,t,n){},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Board=void 0;var i=n(12),o=n(18),l=[{row:0,column:1},{row:1,column:0},{row:0,column:-1},{row:-1,column:0},{row:1,column:1},{row:-1,column:-1},{row:1,column:-1},{row:-1,column:1}],r=function(){function e(e,t,n){this.validateInputs(e,t,n),this.rows=e,this.columns=t,this.mines=0,this.board=this.createInternalBoard(n),this.addMines(n),this.mineCount=this.mines}return e.prototype.click=function(e){var t=this.getCellState(e);t===i.CellState.Unclicked?this.floodfill(e):t===i.CellState.UnclickedMine?this.explode():this.isFullyFlaggedCell(e)&&this.clickAllNeighbors(e),this.mineCount=this.calculateMineCount();var n=this.calculateGameState();return this.cleanUpGameIfNecessary(n),n},e.prototype.rightClick=function(e){var t=this.getCell(e);i.unclickedStates.includes(t.cellState)?t.rightClick():this.isFullyFlaggedCell(e)&&this.clickAllNeighbors(e),this.mineCount=this.calculateMineCount();var n=this.calculateGameState();return this.cleanUpGameIfNecessary(n),n},e.prototype.calculateGameState=function(){var e=this.getStateCounts();return e[i.CellState.ClickedMine]?o.GameState.Lost:(e[i.CellState.Unclicked]||0)+(e[i.CellState.Flagged]||0)+(e[i.CellState.Questioned]||0)===0?o.GameState.Won:o.GameState.Active},e.prototype.calculateMineCount=function(){for(var e=this.mines,t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)i.flaggedStates.includes(this.getCellState({row:t,column:n}))&&(e-=1);return e},e.prototype.getStateCounts=function(){for(var e={},t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++){var i=this.getCellState({row:t,column:n});e[i]=(e[i]||0)+1}return e},e.prototype.clickAllNeighbors=function(e){var t=this;this.getInBoundNeighbors(e).forEach((function(e){t.getCellState(e)===i.CellState.UnclickedMine?t.explode():t.floodfill(e)}))},e.prototype.getCellNumNeighborMines=function(e){var t=this;return this.isCellInBounds(e)?this.getInBoundNeighbors(e).map((function(e){return t.isMineCell(e)})).filter(Boolean).length:0},e.prototype.getCellNumNeighborFlags=function(e){var t=this;return this.isCellInBounds(e)?this.getInBoundNeighbors(e).map((function(e){return t.isFlaggedCell(e)})).filter(Boolean).length:0},e.prototype.getCell=function(e){if(!this.isCellInBounds(e))throw Error("Cell out of bounds");return this.board[e.row][e.column]},e.prototype.getCellState=function(e){if(!this.isCellInBounds(e))throw Error("Cell out of bounds");return this.board[e.row][e.column].cellState},e.prototype.floodfill=function(e){var t=this;this.getCellState(e)===i.CellState.Unclicked&&(this.getCell(e).click(),0===this.getCellNumNeighborMines(e)&&this.getInBoundNeighbors(e).forEach((function(e){t.floodfill(e)})))},e.prototype.explode=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMineCell({row:e,column:t})&&this.board[e][t].click()},e.prototype.getInBoundNeighbors=function(e){var t=this,n=[];return l.forEach((function(i){var o={row:e.row+i.row,column:e.column+i.column};t.isCellInBounds(o)&&n.push(o)})),n},e.prototype.isCellInBounds=function(e){return!(e.row<0||e.row>=this.rows)&&!(e.column<0||e.column>=this.columns)},e.prototype.createInternalBoard=function(e){for(var t=Array(this.rows),n=0;n<this.rows;n++){t[n]=Array(this.columns);for(var o=0;o<this.columns;o++)t[n][o]=new i.Cell}return t},e.prototype.addMines=function(e){for(var t=this.rows*this.columns/2,n=0;n<e&&this.mines<t;){var i=this.getRandomInt(this.rows),o=this.getRandomInt(this.columns);this.isUnclickedNonMineCell({row:i,column:o})&&(this.board[i][o].isMine=!0,n++,this.mines++)}},e.prototype.isMineCell=function(e){return i.mineStates.includes(this.getCellState(e))},e.prototype.isUnclickedNonMineCell=function(e){return i.unclickedNonMineStates.includes(this.getCellState(e))},e.prototype.isFlaggedCell=function(e){return i.flaggedStates.includes(this.getCellState(e))},e.prototype.isFullyFlaggedCell=function(e){return this.getCellState(e)===i.CellState.Clicked&&this.getCellNumNeighborFlags(e)===this.getCellNumNeighborMines(e)},e.prototype.cleanUpGameIfNecessary=function(e){if(e===o.GameState.Won)for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.getCellState({row:t,column:n})===i.CellState.QuestionedMine&&this.rightClick({row:t,column:n}),this.getCellState({row:t,column:n})===i.CellState.UnclickedMine&&this.rightClick({row:t,column:n})},e.prototype.validateInputs=function(e,t,n){var i=e*t/2;if(n<0||n>i)throw Error("Please provide a number of mines between 0 and ".concat(i));if(e<=0||e>100)throw Error("Please provide a number of rows between 1 and 100");if(t<=0||t>100)throw Error("Please provide a number of columns between 1 and 100")},e.prototype.getRandomInt=function(e){var t=Math.floor(Math.random()*e);return t>e?e:t},e.prototype.allCells=function(){for(var e=[],t=0;t<this.rows;t++)e=e.concat(this.board[t]);return e},e}();t.Board=r},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),l=n(28),r=n.n(l),c=n(32),a=n(1),s=(n(38),n(10)),u=(n(39),n(21)),d=(n(43),n(44),n(12)),h=n(2);var g=function(e){var t=e.cellState,n=e.numNeighborMines;return Object(h.jsx)("div",{className:"GameCell ".concat(d.unclickedStates.includes(t)?"unclicked":t===d.CellState.Clicked?"clicked":t===d.CellState.ClickedMine?"clicked-mine":""),children:t===d.CellState.Clicked&&n>0?String(n):t===d.CellState.ClickedMine?"\ud83d\udca3":t===d.CellState.Flagged||t===d.CellState.FlaggedMine?"\ud83d\udea9":t===d.CellState.Questioned||t===d.CellState.QuestionedMine?"\u2753":""})};var m=function(e){var t=e.gameBoard,n=e.onCellClick;return Object(h.jsx)("div",{className:"GameBoard",id:"game-board","data-testid":"game-board",children:t.board.map((function(e,i){return Object(h.jsx)("div",{className:"Row",children:e.map((function(e,o){return Object(h.jsx)("div",{className:"Cell",onClick:function(e){return n(e,{row:i,column:o})},onContextMenu:function(e){return n(e,{row:i,column:o})},children:Object(h.jsx)(g,{cellState:t.getCellState({row:i,column:o}),numNeighborMines:t.getCellNumNeighborMines({row:i,column:o})})},o)}))},i)}))})},f=(n(46),n(18));var C=function(e){var t=e.gameState,n=Object(i.useState)(0),o=Object(s.a)(n,2),l=o[0],r=o[1];return function(e,t,n){var o=Object(i.useRef)(),l=Object(i.useRef)(),r=Object(i.useRef)();function c(){o.current&&o.current()}Object(i.useEffect)((function(){o.current=e,l.current=t})),Object(i.useEffect)((function(){n===f.GameState.Active?r.current=setInterval(c,1e3):n!==f.GameState.Lost&&n!==f.GameState.Won&&n!==f.GameState.Idle||void 0===r.current||(clearInterval(r.current),n===f.GameState.Idle&&l.current&&l.current(0))}),[n])}((function(){return r(l+1)}),(function(){return r(0)}),t),Object(h.jsx)("div",{children:l})};document.addEventListener("contextmenu",(function(e){e.preventDefault()}));var p=function(){var e=Object(i.useState)(new u.Game(20,20,50)),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("button",{onClick:function(){o(new u.Game(20,20,50))},children:"Reset"}),Object(h.jsxs)("div",{className:"header-numbers",children:[Object(h.jsx)(C,{gameState:n.gameState}),n.board.mineCount]}),Object(h.jsx)(m,{gameBoard:n.board,onCellClick:function(e,t){if("click"===e.type){var i=n.click(t);o(i)}else if("contextmenu"===e.type){var l=n.rightClick(t);o(l)}}})]})})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),l(e),r(e)}))},S=n(33);n(51);document.addEventListener("contextmenu",(function(e){e.preventDefault()}));var v=function(){var e=Object(i.useRef)();Object(i.useEffect)((function(){e.current=Object(S.a)(),e.current.on("setGame",(function(e){l(Object(u.deserializeGame)(e))}))}),[]);var t=Object(i.useState)(),n=Object(s.a)(t,2),o=n[0],l=n[1];return Object(h.jsx)("div",{className:"App",children:!!o&&Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("button",{onClick:function(){e.current&&e.current.emit("resetGame")},children:"Reset"}),Object(h.jsxs)("div",{className:"header-numbers",children:[Object(h.jsx)(C,{gameState:o.gameState}),o.board.mineCount]}),Object(h.jsx)(m,{gameBoard:o.board,onCellClick:function(t,n){"click"===t.type?e.current&&e.current.emit("click",n):"contextmenu"===t.type&&e.current&&e.current.emit("rightClick",n)}})]})})};r.a.render(Object(h.jsxs)(o.a.StrictMode,{children:[Object(h.jsx)(c.a,{children:Object(h.jsxs)(a.c,{children:[Object(h.jsx)(a.a,{path:"/",element:Object(h.jsx)(p,{})}),Object(h.jsx)(a.a,{path:"coop",element:Object(h.jsx)(v,{})})]})}),","]}),document.getElementById("root")),b()}},[[52,1,2]]]);
//# sourceMappingURL=main.4a581f7a.chunk.js.map